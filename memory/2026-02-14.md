# 2026-02-14

- Frontend (Consultas) evoluído para fluxo operacional: atualização de status e reagendamento direto no card da consulta.
- Corrigido erro interno na criação de consulta causado por `professionalId` vazio (`""`); backend e frontend normalizam para `undefined` para evitar violação de FK.
- Corrigida instabilidade de build/start no backend: `start` ajustado para `node dist/src/main.js` (evita subir build antiga sem rotas novas).
- Seed/demo de dados persistente criado no backend: `prisma/seed-demo.ts` + script `npm run prisma:seed:demo` (idempotente para testes reais sem recriar tudo manualmente).
- Catálogo de serviços foi limpo e padronizado para lista real definida pela usuária, com foco em apresentação comercial (valor cheio e opção de parcelamento até 5x).
- Tela Financeiro/Pacotes ganhou ação para apagar opção de pacote no frontend + endpoint DELETE no backend, com salvaguarda: impede exclusão de pacote já vendido.
- Tela Clientes recebeu melhorias funcionais importantes:
  - editar cliente,
  - apagar cliente com bloqueio quando há histórico vinculado,
  - botão "Histórico e pacotes" com consultas recentes e pacotes comprados.
- Dentro do histórico do cliente foi implementado:
  - editar/apagar consultas recentes,
  - editar/apagar pacotes comprados,
  com novos endpoints no backend para suportar essas ações.
- Tela de Aniversários alterada para mostrar por padrão apenas aniversariantes do dia, mantendo histórico mensal sob demanda.
- Padrão recorrente de ambiente observado: processos de backend/frontend em modo dev/start sofrem SIGKILL intermitente; rotina prática adotada foi religar serviços rapidamente para continuidade.
- Preferência da usuária reforçada ao longo do dia: execução direta/autônoma, entregas rápidas em produção local, interface profissional e orientada a botões.
- Módulos Indicações e Notificações deixaram de ser placeholder e viraram telas reais no frontend, consumindo endpoints já prontos do backend.
- Indicações passou por refinamento orientado pela usuária: campo "Nome de quem indicou" em texto livre (sem dropdown), remoção de e-mail/observações e inclusão de horário de contato com opções fechadas: manhã (10h+), tarde (13h+), noite (até 21h).
- Portal do Cliente web foi criado e publicado na rota `/portal-cliente`, com blocos "Minhas consultas" e "Minhas indicações" usando `/api/portal/*`.
- Usuário CLIENT de teste criado/atualizado para validação do portal: `cliente@clinica.local`.
- Dashboard recebeu atalho para "Portal Cliente" para facilitar validação.
- Instabilidade operacional voltou a ocorrer (SIGKILL/connection refused); mitigação imediata aplicada: restart backend/frontend com `start:stable` e checagem de portas 3000/5173 antes de orientar novo teste.
- Fluxo do Meta Developers para WhatsApp Cloud API foi concluído até "Configuração da API"; IDs confirmados no app: `WHATSAPP_PHONE_NUMBER_ID=1037992336057474` e WABA `750290681182248`.
- Credenciais do WhatsApp foram aplicadas no backend (`.env`) e serviço reiniciado com sucesso; testes passaram a atingir a API da Meta.
- Erro de teste atual validado: `(#131030) Recipient phone number not in allowed list` (número de destino não autorizado na lista de teste da Meta), indicando integração técnica ativa e pendência apenas de allowlist do destinatário.
